#
# /etc/makepkg.conf
#

# The FTP/HTTP download utility that makepkg should use to acquire sources
export FTPAGENT="/usr/bin/wget -U makepkg --continue --passive-ftp --tries=3 --waitretry=3 --timeout=20 --no-check-certificate"
#export FTPAGENT="/usr/bin/snarf"
#export FTPAGENT="/usr/bin/lftpget -c"

# The rsync utility that makepkg should use to access the Frugalware mirrors
export RSYNCAGENT="rsync -e 'ssh -q -o GlobalKnownHostsFile=$HOME/.ssh/known_hosts -i $HOME/.ssh/id_dsa' -vP"


## to be moved after infra for znver1 is there
case $(uname -m) in
	x86_64)
		CARCH="x86_64"
		CHOST="x86_64-frugalware-linux"
		;;
esac

export CARCH CHOST

### C/XX FLAGS:
# -pipe : always enabled.
# -fno-plt : options+=('plt') to disable.
# -fstack-protector-strong : options+=('noprotector') to disable.
# -fstack-clash-protection : options+=('noclash') to disable.
# -Wformat -Werror=format-security : options+=('nowfsecurity') to disable.
# -pie ( added by gcc as default ) : options+=('nopie') to disable.
# -Wp,-D_FORTIFY_SOURCE=2 : options+=('nofortify') to disable.
# -flto : options+=('noflto') to disable.

### LDFLAGS:
# always ON: "-Wl,--hash-style=gnu -Wl,-O1 -Wl,--sort-common"
# -Wl,--as-needed: options+=('noasneeded') to disable.
# -Wl,z,now: options+=('nonow') to disable.
# -Wl,z,relro : options+=('norelro') to disable.
# -Wl,-z,defs : options+=('ldefs') to enable

### Optimization Levels
# options+=('osmall')  : enables -Os
# options+=('omedium') : enables -O2
# options+=('ofast')   : enables -O3
# options+=('ofaster') : enables -Ofast
# options+=('odebug')  : enables -O0 -ggdb3 (for now)
### Default: omedium ( -O2 )

### LD options
# options+=('ldbfd') : enabled -fuse-ld=bfd (bfd linker)
# options+=('ldlld') : enabled -fuse-ld=lld (lld linker (clang))
# options+=('ldgold') : enabled -fuse-ld=gold
### Default is gold

### Build Type:
# generic : -march=x86-64 -mtune=generic
# znver1  : -march=znver1 -mtune=znver1 ( not fully implemented )
# none    : empy flags
### NOTE: Empty or/and unknow value will cause makepkg to error out!

export BUILD_TYPE="generic"

# SMP Systems
#export MAKEFLAGS="-j2"
export USE_AUTO_MAKEFLAGS="y"

# Default name of build scripts
export BUILDSCRIPT="FrugalBuild"

# Package extension
export PKG_EXT="@PKG_EXT@"

# Package compression
export PKG_COMP="@PKG_COMP@"

# Database extension
export DB_EXT="fdb"

# Enable fakeroot for building packages as a non-root user
export USE_FAKEROOT="y"

# Specify a directory for ccache
#export CCACHE_BASEDIR=/var/cache/ccache

# Specify a directory for the chroot environment.
export CHROOTDIR="/var/chroot"
# Core package list to be installed in the chroot.
export COREPKGS="core chroot-core devel-core"

# Enable distributed C/C++/ObjC compiler
# Don't forget to modify MAKEFLAGS to include -jN, where N is twice the
# number of CPUs +1 available
export DISTCC="n"
# Space-separated list of volunteer host specifications.
export DISTCC_HOSTS=""

# Enable colorized output messages
export USE_COLOR="y"

# Specify a fixed directory where all packages will be placed
#export PKGDEST=/home/packages

# If you want your name to show up in the packages you build, change this.
export PACKAGER="Frugalware Linux (http://frugalware.org)"

# Don't strip symbols from binaries/libraries
#export NOSTRIP="1"
# Don't prepare documentation
#export NODOCS="1"

# LOGDIR is the location where you would like to store a
# permanant copy of the build log.
# filename = [LOGDIR_APPEND]-[pkgname]-[pkgver]-[pkgrel]
#LOGDIR_APPEND=`date +%Y-%m-%d-%s`
#LOGDIR=/var/log/builds

# The Standard Build Unit of this machine
# If 1, then the build time will be displayed in seconds
# Build the "binutils" package, and then write here the result you got,
# so that makepkg will could the right SBU value for you.
SBU="1"

# Uncomment the following line if you want build time to be more "human readable."
#HRBT="1"

# Options for xz used in compression
export XZ_OPT="--threads=0"
